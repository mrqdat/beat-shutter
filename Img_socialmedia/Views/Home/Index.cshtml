@model IEnumerable<PostViewModel>

@{
    Layout = "_Layout";
    ViewData["Title"] = "Shutter | Free images and photos for every one ";
}
<div class="vertical_menu">
    <div class="scrollmenu">
        <a href="#home">Curent Event</a>
        <a href="#news">News</a>
        <a href="#contact">Nature</a>
        <a href="#about">Friend</a>
        <a href="#support">Animals</a>
        <a href="#blog">Health & Wellness</a>
        <a href="#tools">Tools</a>
        <a href="#base">Girls</a>
        <a href="#custom">Portrait</a>
        <a href="#more">Travel</a>
        <a href="#logo">Technology</a>
        <a href="#blog">Film</a>
        <a href="#tools">Architecture</a>
    </div>
</div>

<div class="bgimage">
    <div class="container-fluid">
        <div class="row" style="margin-right:0;">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-lg-center">
                <div class="text-lg-center">
                    <h1>All the best free stock photos and images<br />Shared by talented creators</h1>
                    <form asp-controller="Post" asp-action="Search" method="get">
                        <div class="wrap">
                            <div class="search">
                                <button type="submit" class="searchButton">
                                    <i class="fa fa-search"></i>
                                </button>
                                <input type="text" name="tags" class="searchTerm" placeholder="What are you looking for?">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="grid-layout">
    <div class="grid-photos">
        <div id="col1">
            @foreach (var related in Model)
            {
                @if (@related.Id % 3 == 0)
                {
                    <div class="img-x">
                        <figure>
                            <div class="img-content">
                                <a class="a-cursor" asp-controller="Post" asp-route-id="@related.Id" asp-action="Index">
                                    <div class="img-rel">
                                        <img class="photo-content" src="@related.Photo.Url" asp-append-version="true" alt="@related.Tags" />
                                    </div>
                                </a>
                                <div class="img-icon">
                                    <div class="img-hover-background i-animation"></div>
                                    <div class="img-button-top img-button-display i-animation">
                                        <div class="img-button">
                                            @if (related.Liked)
                                            {
                                                <a class="btn btn-danger btn-hw pos-button modal-btns" style="color:white;" title="like this photo" onclick="ChangeLike(this,@related.Id)">
                                                    <span id="heart"><i class="fa fa-heart-o" aria-hidden="true"></i> </span>
                                                </a>
                                            }
                                            else
                                            {
                                                <a class="btn btn-light btn-hw pos-button modal-btns" title="like this photo" onclick="ChangeLike(this,@related.Id)">
                                                    <span id="heart"><i class="fa fa-heart-o" aria-hidden="true"></i> </span>
                                                </a>
                                            }
                                            <button class="btn btn-light">
                                                <svg class="bi bi-plus" width="1em" height="1em" viewBox="2 4 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" d="M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z" />
                                                    <path fill-rule="evenodd" d="M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="img-button-bottom img-button-display i-animation">
                                        <div class="owner-photo">
                                            <span>
                                                <a asp-controller="User" asp-action="Details" asp-route-id="@related.UserId">
                                                    <img class="owner-img" src="@(related.UserImg??"/images/man.png")" asp-append-version="true" />
                                                </a>
                                            </span>
                                            <a class="owner-name" asp-controller="User" asp-action="Details" asp-route-id="@related.UserId">
                                                @related.Username
                                            </a>
                                        </div>
                                        <div class="img-button">
                                            <a class="btn btn-light" href="@related.Photo.Url" download>
                                                <svg class="bi bi-download" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" d="M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8z" />
                                                    <path fill-rule="evenodd" d="M5 7.5a.5.5 0 0 1 .707 0L8 9.793 10.293 7.5a.5.5 0 1 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5 8.207A.5.5 0 0 1 5 7.5z" />
                                                    <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 1z" />
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </figure>
                    </div>
                }
            }
        </div>
        <div id="col2">
            @foreach (var related in Model)
            {
                @if (@related.Id % 3 == 1)
                {
                    <div class="img-x">
                        <figure>
                            <div class="img-content">
                                <a class="a-cursor" asp-controller="Post" asp-route-id="@related.Id" asp-action="Index">
                                    <div class="img-rel">
                                        <img class="photo-content" src="@related.Photo.Url" asp-append-version="true" alt="@related.Tags" />
                                    </div>
                                </a>
                                <div class="img-icon">
                                    <div class="img-hover-background i-animation"></div>
                                    <div class="img-button-top img-button-display i-animation">
                                        <div class="img-button">
                                            @if (related.Liked)
                                            {
                                                <a class="btn btn-danger btn-hw pos-button modal-btns" style="color:white;" title="like this photo" onclick="ChangeLike(this,@related.Id)">
                                                    <span id="heart"><i class="fa fa-heart-o" aria-hidden="true"></i> </span>
                                                </a>
                                            }
                                            else
                                            {
                                                <a class="btn btn-light btn-hw pos-button modal-btns" title="like this photo" onclick="ChangeLike(this,@related.Id)">
                                                    <span id="heart"><i class="fa fa-heart-o" aria-hidden="true"></i> </span>
                                                </a>
                                            }
                                            <button class="btn btn-light">
                                                <svg class="bi bi-plus" width="1em" height="1em" viewBox="2 4 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" d="M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z" />
                                                    <path fill-rule="evenodd" d="M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="img-button-bottom img-button-display i-animation">
                                        <div class="owner-photo">
                                            <span>
                                                <a asp-controller="User" asp-action="Details" asp-route-id="@related.UserId">
                                                    <img class="owner-img" src="@(related.UserImg??"/images/man.png")" asp-append-version="true" />
                                                </a>
                                            </span>
                                            <a class="owner-name" asp-controller="User" asp-action="Details" asp-route-id="@related.UserId">
                                                @related.Username
                                            </a>
                                        </div>
                                        <div class="img-button">
                                            <a class="btn btn-light" href="@related.Photo.Url" download>
                                                <svg class="bi bi-download" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" d="M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8z" />
                                                    <path fill-rule="evenodd" d="M5 7.5a.5.5 0 0 1 .707 0L8 9.793 10.293 7.5a.5.5 0 1 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5 8.207A.5.5 0 0 1 5 7.5z" />
                                                    <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 1z" />
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </figure>
                    </div>
                }
            }
        </div>
        <div id="col3">
            @foreach (var related in Model)
            {
                @if (@related.Id % 3 == 2)
                {
                    <div class="img-x">
                        <figure>
                            <div class="img-content">
                                <a class="a-cursor" asp-controller="Post" asp-route-id="@related.Id" asp-action="Index">
                                    <div class="img-rel">
                                        <img class="photo-content" src="@related.Photo.Url" asp-append-version="true" alt="@related.Tags" />
                                    </div>
                                </a>
                                <div class="img-icon">
                                    <div class="img-hover-background i-animation"></div>
                                    <div class="img-button-top img-button-display i-animation">
                                        <div class="img-button">
                                            @if (related.Liked)
                                            {
                                                <a class="btn btn-danger btn-hw pos-button modal-btns" style="color:white;" title="like this photo" onclick="ChangeLike(this,@related.Id)">
                                                    <span id="heart"><i class="fa fa-heart-o" aria-hidden="true"></i> </span>
                                                </a>
                                            }
                                            else
                                            {
                                                <a class="btn btn-light btn-hw pos-button modal-btns" title="like this photo" onclick="ChangeLike(this,@related.Id)">
                                                    <span id="heart"><i class="fa fa-heart-o" aria-hidden="true"></i> </span>
                                                </a>
                                            }
                                            <button class="btn btn-light">
                                                <svg class="bi bi-plus" width="1em" height="1em" viewBox="2 4 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" d="M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z" />
                                                    <path fill-rule="evenodd" d="M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="img-button-bottom img-button-display i-animation">
                                        <div class="owner-photo">
                                            <span>
                                                <a asp-controller="User" asp-action="Details" asp-route-id="@related.UserId">
                                                    <img class="owner-img" src="@(related.UserImg??"/images/man.png")" asp-append-version="true" />
                                                </a>
                                            </span>
                                            <a class="owner-name" asp-controller="User" asp-action="Details" asp-route-id="@related.UserId">
                                                @related.Username
                                            </a>
                                        </div>
                                        <div class="img-button">
                                            <a class="btn btn-light" href="@related.Photo.Url" download>
                                                <svg class="bi bi-download" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" d="M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8z" />
                                                    <path fill-rule="evenodd" d="M5 7.5a.5.5 0 0 1 .707 0L8 9.793 10.293 7.5a.5.5 0 1 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5 8.207A.5.5 0 0 1 5 7.5z" />
                                                    <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 1z" />
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </figure>
                    </div>
                }
            }
        </div>
    </div>
</div>
@* collection modal *@
<div class="fade bgiPhoto" id="collection_modal" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="cursor: auto;min-height: 400px;">
            <div class="collection-content">
                <div class="collection">
                    <div class=collection-bg style="background-image: url('./images/f686c873-8cc3-4963-b74c-65d76401d22a-shutter.jpg');"></div>
                    <div class="collection-all">
                        <div class="collection-list">
                            <div class="collection-list-item">
                                <h3>Add to Collection</h3>
                                <button class="btn create-item" id="create-item">
                                    <h6>Create a new collection</h6>
                                </button>
                                <ul class="collection-item">

                                    <li class="item-detail">
                                        <button class="btn" style="display:flex;width:100%;">
                                            <div class="item-name">
                                                <span>7 photos</span>
                                                <h6>Portrait</h6>
                                            </div>
                                            <div class="addto" title="add to collection">
                                                <svg class="bi bi-plus" width="1em" height="1em" viewBox="2 4 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" d="M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z" />
                                                    <path fill-rule="evenodd" d="M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z" />
                                                </svg>
                                            </div>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="collection-create">
                            <div class="">
                                <h3>Create new collection</h3>
                                <form id="newcollection" method="post">
                                    <div class="create-item">
                                        <input class="colname" type="text" name="colname" value="" placeholder="Collection name" required />
                                    </div>
                                    <div class="create-item">
                                        <input class="coldes" type="text" name="coldes" placeholder="Description" value="" />
                                    </div>
                                    <div class=collection-action>
                                        <button class="btn craete-cancel"><u>Cancel</u></button>
                                        <button class="btn crebtn" type="button"><u>Create</u></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@* share modal *@
<div class="fade bgiPhoto" id="share_modal" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="cursor:auto">
            <div class="iPL30r">
                <h2 style="font-size:21px;">Share</h2>
                <span style="font-size:12px;">Photo by user</span>
            </div>
            <div class="iPL30r">
                <div class="iPhoto">
                    <div class="share-option">
                        <a class="btn btn-light btn-share" href="#" title="Share on facebook" target="_blank">
                            <svg class="fb-logo" version="1.1" fill="#1778f2" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M32 16.1c0-8.9-7.2-16-16-16S0 7.2 0 16.1c0 8 5.9 14.6 13.5 15.8V20.7H9.4v-4.6h4.1v-3.5c0-4 2.4-6.2 6-6.2 1.8 0 3.6.3 3.6.3v3.9h-2c-2 0-2.6 1.2-2.6 2.5v3h4.4l-.7 4.6h-3.7v11.2C26.1 30.7 32 24.1 32 16.1"></path></svg>
                            <span style="font-size:12px;">Facebook</span>
                        </a>

                    </div>
                    <div class="share-option">
                        <a class="btn btn-light btn-share" href="#" title="Share on facebook" target="_blank">
                            <svg class="fb-logo" fill="#1da1f2" version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M10.2 28.9c12 0 18.6-9.9 18.6-18.6v-.8c1.2-1 2.3-2.1 3.2-3.4-1.2.5-2.5.9-3.8 1 1.4-.8 2.4-2.1 2.9-3.6-1.3.8-2.7 1.3-4.2 1.6-2.5-2.6-6.6-2.8-9.2-.3-1.7 1.6-2.4 4-1.9 6.3-5.2-.3-10-2.8-13.4-6.9-1.7 3-.9 6.8 2 8.7-1 0-2.1-.3-3-.8v.1c0 3.1 2.2 5.8 5.3 6.4-1 .3-2 .3-3 .1.9 2.7 3.3 4.5 6.1 4.6-2.3 1.8-5.2 2.8-8.1 2.8-.5 0-1 0-1.6-.1 3.1 1.9 6.6 2.9 10.1 2.9"></path></svg>
                            <span style="font-size:12px;">Twitter</span>
                        </a>
                    </div>
                    <div class="share-option"></div>

                    <div class="">
                        <a href="#"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="test-modal"></div>
<div class=" test" style="padding-bottom:400px;"></div>

<button onclick="topFunction()" id="btn_ontop" title="Go to top">
    <i class="fa fa-2x fa-angle-up" style="color: #747474;"></i>
</button>
<div class="loader"></div>

<script type="text/javascript">
    //Get the button
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
    var ontop = document.getElementById("btn_ontop");
    window.onscroll = function () { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
            ontop.style.display = "block";
        } else {
            ontop.style.display = "none";
        }
    }

    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }

    $('#create-item').on('click', function () {
        $('.collection-list').hide();
        $('.collection-create').show();
    });

    $('.craete-cancel').on('click', function () {
        $('.collection-list').show();
        $('.collection-create').hide();
    });

    $(document).ready(function () {
        $('.com').click(function () {
            $('.modal-comment').animate({
                width: "toggle",
                duration: 500
            });
        });
    });

    $(window).scroll(function () {
        if ($(window).scrollTop() + $(window).height() +1 >= $(document).height()) {
            AJAXLoadPhoto();
        }
        else {

        }
    });
    var pageSize = 2;
    function AJAXLoadPhoto() {
        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("TestB")",	               
                data: { page: pageSize },
                success: function (msg) {
                    if (msg != null) {
                        msg.forEach(function (item, index) {
                            pageSize++;
                            if (item["id"] % 3 == 0) {
                                AppendToGrid(item, "#col1");
                            }
                            else if (item["id"] % 3 == 1) {
                                AppendToGrid(item, "#col2");
                            }
                            else {
                                AppendToGrid(item, "col3");
                            }
                        });
                    }
                    else {
                        //nothing
                    }
                },
                error: function (req, status, error) {
                    console.log(error);
                }
            });
        });
    }
    function AppendToGrid(item,col) {
        $(col).append(
           "<div class='img-x'>" +
                "<div class='img-content'>" +
                    "<a class='a-cursor' href='/post/"+item["id"]+"'>" + //link to photo
                        "<div class='img-rel'>" +
                            "<img class='photo-content' src='"+item["photo"].url+"' alt='' />" + //photo url photo tags
                        "</div>" +
                    "</a>" +
                   "<div class='img-icon'>" +
                        "<div class='img-hover-background i-animation'></div>" +
                        "<div class='img-button-top img-button-display i-animation'>" +
                           " <div class='img-button'>" +
                                "<button class='btn btn-light pos-button'> "+ //xu ly nut like
                                    "<i class='heart'></i>" +
                                "</button>" +
                                "<button class='btn btn-light'>" +
                                    "<svg class='bi bi-plus' width='1em' height='1em' viewBox='2 4 12 12' fill='currentColor' xmlns='http://www.w3.org/2000/svg'>" +
                                        "<path fill-rule='evenodd' d='M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z' /> "+
                                        "<path fill-rule='evenodd' d='M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z' />" +
                                    "</svg>" + //them vao collection
                                "</button>" +
                           "</div>" +
                        "</div>" +
                        "<div class='img-button-bottom img-button-display i-animation'>" +
                            "<div class='owner-photo'>" +
                                "<span>" +
                                    "<a href='/User/Details/"+item["userId"]+"'>" + //link ID nguoi dang
                                        "<img class='owner-img' src='"+item["userImg"]+"' />" + //url photo nguoi dang
                                   " </a>" +
                                "</span>" +
                                "<a class='owner-name' href='/User/Details/" + item["userId"].id +"'>" + //link ID
                                     item["username"] + //Ten nguoi dang
                                " </a>" +
                           " </div>" +
                            "<div class='img-button'>" +
                                "<button class='btn btn-light'>" +
                                    "<svg class='bi bi-download' width='1em' height='1em' viewBox='0 0 16 16' fill='currentColor' xmlns='http://www.w3.org/2000/svg'>" +
                                        "<path fill-rule='evenodd' d='M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8z' /> "+
                                        "<path fill-rule='evenodd' d='M5 7.5a.5.5 0 0 1 .707 0L8 9.793 10.293 7.5a.5.5 0 1 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5 8.207A.5.5 0 0 1 5 7.5z' />" +
                                        "<path fill-rule='evenodd' d='M8 1a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 1z' />" +
                                   "</svg>" + //Xu ly nut download
                                "</button>" +
                            "</div>" +
                        "</div>" +
                    "</div>" +
                "</div>" +
            "</div>"
        );
    }

    function ChangeLike(e,ide) {
        $.ajax({
        type: "POST",
        url: "@Url.Action("Like","Post")",
        data: {id:ide},
        success: function (msg) {
            if (msg["status"]) {
                e.classList.remove("btn-light");
                e.classList.add("btn-danger");
                $(e).css("color", "white");
            }
            else if (!msg["status"]){
                e.classList.remove("btn-danger");
                e.classList.add("btn-light");
                $(e).css("color", "black");
            }
                else {
                          //  window.location.href = "Url.Action("Login", "Account")";
                }                          
            },
                error: function (req, status, error) {
                    console.log(error);
                }
        });
    }

    function report(postid) {
        $.ajax(
        {
            type: "POST",
            url: "@Url.Action("report","Post")",
            data: { id: postid },
            success: function (respone) {
                if (respone.status == true) {
                    alert("Are you sure to report this post");
                }
                else {
                    window.location.href = "@Url.Action("Login", "Account")";
                }
            },
            error: function (error) {
                console.log(error);
            }
        });
    }

    $(document).ready(function () {
        //var id = $('.a-cursor').attr('asp-route-id');
        //$('.mdbody').attr('asp-route-id', id);
        @* $('.img-content').on('click', function () {
            debugger
            var a = $('.photo-content').attr('src');

            $('.photo-main').attr('src', a);

        }); *@
    });

</script>